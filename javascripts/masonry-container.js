(function(){$(function(){var t,e,r,a,s,o,n,u,i;return u=$(".right_col"),i=$(".right_col > div"),a=$(".right_col .page-filter"),t=$(".grid-posts"),r=$("#post-load-data"),s=function(){var t;if(t=r.attr("data-action"))return"msm"===t?Routes.user_my_feeds_path():"saved_news"===t?Routes.user_saved_news_path():"saved_posts"===t?Routes.user_saved_posts_path():"rejected_news"===t?Routes.user_rejected_news_path():"rejected_research"===t?Routes.user_rejected_research_path():"rejected_posts"===t?Routes.user_rejected_posts_path():Routes.user_social_magnet_path()},n=s(),window.detectBottom=function(){if(u.scrollTop()>=i.height()-u.height()+a.height()&&"false"===r.attr("data-last"))return $(".ag-post-loading").show(),e()},e=function(){var t,e,a;return a=parseInt(r.attr("data-page")),e=r.attr("data-order"),t=r.attr("data-filter"),u.off("scroll",detectBottom),$.ajax({url:n+"/?page="+a+"&order="+e+"&"+t,type:"GET",success:function(){return r.attr("data-page",a+1)}})},o=function(){return t.addClass("visible")},t.imagesLoaded(function(){return t.masonry(function(){return{itemSelector:".grid-post-item"}}),t.masonry("layout"),setTimeout(function(){return o()},100)}),u.scroll(detectBottom)})}).call(this);